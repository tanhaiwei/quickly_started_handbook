# 事件分析

## 1、事件分析概述

事件分析是对目标实体基于事件属性、用户属性、页面分组进行多维度分析。由用户模型和事件模型可知目标实体包括：访客、登录用户、行为事件；在此基础上我们为用户行为分析需求增加了“会话”以及基于用户生命周期分析的“买家”这两个分析实体。

事件分析的目标实体：

* 用户user：访客、登录用户、买家等。

* 事件event：用户做了什么事情，由“行为动作+目标对象”；比如浏览一个页面、点击一个按钮。

* 会话session：用户从访问应用到离开的一系列连续行为称为会话。

注：买家是针对电商行业的用户核心转化行为“支付订单”事件定义的；相应的，对于非电商行业也可以使用核心转化行为来替换“支付订单”事件来定义用户的生命周期转化。比如：知乎网站可以使用“回答问题”事件作为核心转化事件。

指标是对目标实体的度量，维度是通过事件属性、用户属性对目标实体进行分解、过滤及对比。

为了更好的进行业务分析和产品使用体验，我们对维度进行了分类：通用维度、自定义维度、用户维度、市场渠道维度。

通过强大、易用的事件分析功能我们可以很容易完成数据可视化分析。比如：

* 按城市维度查看用户访问量。
* 按浏览器查看网站页面浏览量。
* 查看过去30天和上周期30天的用户活跃对比。
* 查看不同商品分类在每天的销量表现。

## 2、事件分析列表

![](/assets/事件分析_列表_标号@2x.png)

### 2.1、事件分析列表

显示已保存的事件分析图表。默认按照更新时间倒序显示。

### 2.2、搜索事件分析图表

通过事件分析图表名称搜索图表。

### 2.3、事件分析图表排序

可以切换事件分析图表排序规则，按更新时间倒序排列或正序排列。

### 2.4、新建事件分析入口

点击“新建事件分析”按钮后进入事件分析创建界面。

## 3、新建事件分析

### ![](/assets/线图_完成配置.png)3.1选择图表类型

我们支持多种可视化图表类型：线图、维度线图、柱形图、维度柱图、横向柱图、饼图、维度饼图、统计卡、表格。您可以根据分析需求选择合适的图表类型。

线图：支持多个指标和1个时间维度；单个指标时支持周期对比；线图适合查看业务趋势或对比多指标。

维度线图：支持1个指标和2个维度，其中一个固定的时间维度；维度线图适合对指标进行分解分析。

柱形图：支持多个指标和1个时间维度；柱形图适合多个指标在相同时间区间内的对比分析。

维度柱图：支持1个指标和2个维度；维度柱图适合对指标进行分解后对比时间上的变化趋势。

横向柱图：支持1个指标和1个维度；横向柱图适合对指标进行分解后对比各个值的总量。

饼图：支持多个指标；饼图适合多个指标对比，分析指标百分比占比情况。

维度饼图：支持1个指标和1个维度；维度饼图适合对指标进行分解后分析百分比占比情况。

统计卡：支持1个指标；支持周期对比；统计卡适合查看总额、总量等KPI指标。

表格：支持多个指标和多个维度；表格适合复杂的统计分析需求。

### 3.2选择指标

指标是对分析实体的度量，比如：登录用户量、注册按钮次数、提交订单的总金额、网站访问量。

根据分析和运营需求，我们对指标进行了分类：预设指标、自定义指标、事件指标。

* 预设指标：系统预设了部分常用指标；比如：页面浏览量、访问量、新建注册用户量、订单总金额、访客量等。
* 自定义指标：自定义指标和指标进行运算；通过数据管理界面的“指标”配置需要的指标；比如：首页注册按钮点击次数/首页页面访问量=首页注册按钮点击率。
* 事件指标：事件分为全埋点事件和埋点事件，选择事件后会默认按照次数进行数据分析，通过点击指标下拉按钮可以修改时间的度量方式；比如：事件+次数、事件+用户数、事件+属性+计算方式。

点击“添加指标”按钮。

![](/assets/选择指标.png)

选择“事件指标”。

![](/assets/选择指标2.png)

事件分析中，我们支持对事件的数值型属性进行多维分析，同时还支持数值型属性进行去重数、求和、最大值、最小值、平均值的计算。

![](/assets/修改指标.png)

### 3.3选择维度

维度是事件的属性或用户的属性，通过使用维度对指标的分解完成精细化多维分析。

同样，根据分析和运营需求，我们按照属性来源和业务意义对维度进行了分类：通用维度、市场渠道维度、自定义维度、用户维度。

* 通用维度：是预设采集的事件属性；比如：时间、浏览器、城市、设备品牌、应用、操作系统、网络类型等。
* 市场渠道维度：是按照市场运营分析需求划分的属性；比如：一级访问来源、渠道分类、广告关键词、广告内容、广告媒介等。
* 自定义维度：是埋点事件采集的事件属性；目前只支持非数值型属性才能对指标进行分解分析；比如：商品金额、商品分类、订单商品数量等。
* 用户维度：是预设采集的用户属性和自定义用户属性；比如：登录用户ID、用户名称、年龄、VIP等级、学历等。

点击“添加维度”按钮。

![](/assets/选择维度.png)

选择”自定义维度“。

![](/assets/选择维度2.png)

### 3.4选择时间范围

选择时间范围对数据进行分析，我们支持相时间和绝对时间两种选择方式。

* 相对时间：是以当天为参照系的时间选择方式，随着时间的变化数据选取范围会自动变化；比如今天是8月15日，则选择“过去7天”相当于“8月8日-8月14日”不包含当天。
* 绝对时间：是指定一个具体时间区间，且不会发生变动；比如选择“9月1日-9月18日”。

注：未来时间不可选择。

选择相对时间。

![](/assets/选择日期_相对时间@2x.png)

选择绝对时间。

![](/assets/选择日期_绝对时间@2x.png)

### 3.5选择时间粒度

时间粒度是指分析过程中使用的时间单位，可以是天、小时、周、月等。

可以根据分析需求选择合适的时间粒度。

![](/assets/选择时间粒度@2x.png)

### 3.6选择过滤条件

过滤条件是事件的属性、用户的属性或者数据状态，使用添加过滤条件完成对数据的过滤设置。

根据事件属性和用户属性的属性类型过滤条件支持不同的过滤方式。

* 字符串：支持包含、不包含、有值、空值、等于、不等于的过滤方式。
* 布尔值：支持包含、不包含、有值、空值、等于、不等于的过滤方式。
* 数值型：支持有值、空值、等于、不等于、大于、小于、范围（between）的过滤方式。

![](/assets/添加过滤@2x.png)

### 3.7输入图表名称

图表名称用于表达分析内容，建议和分析指标相关的名字，有助于同事协作理解。

### 3.8图表可视化区域

完成指标、维度的配置后系统会自动查询数据并进行可视化显示

### 3.9保存图表按钮

点击“保存”按钮完成对事件分析的保存。

