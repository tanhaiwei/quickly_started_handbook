# 数据模型

Datatist预测营销云是通过用户行为数据同时深度结合业务数据解决用户运营优化的一站式闭环产品。我们提出了从数据分析结合AI学习预测到用户运营的一站式闭环解决方案，这对数据采集和整理提出了很高的要求，为此我们建立了用户模型和事件模型来对数据进行标准化，以解决不同场景的复杂需求。

### 用户模型

用户模型是以用户为实体的分析模型，对访客和登录用户进行分析的模型。我们通过userId对登录用户进行标识；通过deviceId或cookieId来对访客进行标识，同时通过用户属性对用户进行描述。

我们在用户模型的基础上融合了用户生命周期模型对业务进行分析和运营，由此，用户分析实体分为以下几类：

* 访客（访问用户）

* 登录用户

* 买家（自定义核心转化用户

**访客**

当访客访问应用时Datatist会为所有终端生成唯一识别ID，Web端通过对浏览器分配cookieId、移动端通过deviceId来对访客进行标识。访客可以很好的分析渠道质量、转化、用户活跃度等指标，同时访客分析只有通用属性，并且cookieId和deviceId在时效性上都存在一定的限制，建议实施userId来进行跨平台、跨应用的用户分析。

**登录用户**

我们在用户登录成功的回调中采集登录信息，通过userId对登录用户进行标识，这样我们就可以做到跨平台、跨应用的用户分析。我们建议以无意义的唯一识别ID来对用户进行标识，当然也可以是邮箱地址、手机号等。基于数据安全，我们将对userId进行加密后传输。用户退出后将清除用户信息。

**买家**

买家是由业务核心转化行为决定的用户实体，您可以根据自身业务需要对核心转化行为进行自定义和对该用户实体的名称进行自定义。

针对电商行业的用户核心转化行为为“支付订单”事件；相应的，对于非电商行业也可以使用核心转化行为来替换“支付订单”事件来定义用户的生命周期转化。比如：知乎网站可以使用“回答问题”事件作为核心转化事件，并将做了该行为的用户实体命名为“答题者”。

**用户属性**

用户属性是描述用户这个分析主体的，Datatist的通用属性中已经有部分用户属性，同时我们也可以自定义用户属性以满足更深入的分析需求，比如：年龄、性别、VIP等级、家庭收入等。用户属性作为维度或过滤条件以及筛选用户条件时作用于全局数据，包括事件、指标。用户属性在配置过程中和事件属性不同的是无需关联到事件，可以在任意事件上实施上报。

### 事件模型

事件模型是以用户行为为实体的分析模型，事件模型5要素包含Who、When、Where、How、What。一个完整事件应该包含事件5要素：

* Who：完成该事件的用户信息，userId或访客ID。

* When：事件发生的时间信息，精确到毫秒的unix时间。

* Where：事件发生的地点信息，通过IP地址解析国家、地区、城市，也可以通过GPS数据解析详细位置。

* How：通过何种方式完成事件，比如：设备品牌、操作系统、浏览器语言等。

* What：行为对象主体信息，比如：点击一个按钮、提交一个表单、浏览一个页面等；事件模型通过事件属性详细描述对象主体，比如加入购物车事件可以有：商品一级分类、商品金额、商品数量等属性。

在Datatist系统中，事件按照采集技术对进行划分：

* 埋点事件

* 全埋点事件

埋点事件：通过代码埋点进行采集的事件，需要工程师实施并发版来上报数据。

全埋点事件：通过SDK自动采集的事件，无需工程师埋码实施；全埋点事件同时又分为元素事件、页面事件、元素合并及页面合并四个小类。

  


